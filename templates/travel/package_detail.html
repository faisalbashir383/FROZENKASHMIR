{% extends 'travel/base.html' %}

{% block title %}{{ package.title }} - Book {{ package.destination.name }} Tour ₹{{ package.price }} | Frozen Kashmir
{% endblock %}

{% block meta_description %}Book {{ package.title }} tour package for ₹{{ package.price }} per person. {{
package.overview|truncatewords:30 }} Duration: {{ package.duration }}. Includes hotel, meals, and transport.
{% endblock %}

{% block meta_keywords %}{{ package.title }}, {{ package.destination.name }} tour package, Kashmir {{
package.get_category_display }} package, {{ package.duration }} Kashmir trip, book {{ package.destination.name }} tour,
{{ package.destination.name }} {{ package.get_category_display }} tour, best {{ package.destination.name }} package,
cheap {{ package.destination.name }} tour, affordable {{ package.destination.name }} trip, {{ package.destination.name
}} holiday package, {{ package.destination.name }} vacation deal, {{ package.destination.name }} travel package, {{
package.destination.name }} sightseeing tour, {{ package.destination.name }} guided tour, {{ package.destination.name }}
group tour, {{ package.destination.name }} private tour, {{ package.destination.name }} customized tour, {{
package.destination.name }} all inclusive, {{ package.destination.name }} with hotel, {{ package.destination.name }}
with meals, {{ package.destination.name }} with transport, {{ package.destination.name }} pickup drop, {{
package.destination.name }} airport transfer, book Kashmir tour online, Kashmir tour booking, Kashmir package booking,
Kashmir trip reservation, Kashmir holiday booking, Kashmir vacation booking, Kashmir best price tour, Kashmir discounted
package, Kashmir early bird offer, Kashmir last minute deal, Kashmir seasonal offer, Kashmir festival package, Kashmir
winter tour package, Kashmir summer holiday, Kashmir spring tour, Kashmir autumn trip, Kashmir honeymoon package
booking, Kashmir family tour booking, Kashmir adventure booking, Kashmir trekking package, Kashmir skiing package,
Kashmir houseboat package, Kashmir luxury tour booking, Kashmir budget tour booking, Kashmir standard package, Kashmir
deluxe tour, Kashmir premium package, Kashmir VVIP tour, Kashmir verified tour, Kashmir trusted operator, Kashmir rated
package, Kashmir recommended tour, Kashmir top selling package, Kashmir popular tour, Kashmir trending package, Kashmir
best reviewed tour, Kashmir 5 star package, Kashmir 4 star tour, Kashmir 3 star budget, Kashmir backpacker tour, Kashmir
solo package, Kashmir couple package, Kashmir group tour, Kashmir senior tour, Kashmir corporate package, Kashmir
student tour{% endblock %}

{% block og_title %}{{ package.title }} - Kashmir Tour Package{% endblock %}
{% block og_description %}{{ package.overview|truncatewords:25 }}{% endblock %}
{% block og_image %}
{% if package.image %}
https://frozenkashmir.com{{ package.image.url }}
{% else %}
https://frozenkashmir.com/static/default-og.jpg
{% endif %}
{% endblock %}
{% block og_type %}product{% endblock %}

{% block extra_structured_data %}
{# Product Schema for Tour Package #}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "{{ package.title }}",
  "description": "{{ package.overview|escapejs }}",
  "image": "https://frozenkashmir.com {% if package.image %}{{ package.image.url }}{% endif %}",
  "brand": {
    "@type": "Brand",
    "name": "Frozen Kashmir Tour & Travels"
  },
  "offers": {
    "@type": "Offer",
    "url": "https://frozenkashmir.com{% url 'package_detail' package.slug %}",
    "priceCurrency": "INR",
    "price": "{{ package.price }}",
    "availability": "https://schema.org/InStock",
    "validFrom": "{{ package.created_at|date:'Y-m-d' }}"
  }{% if package.get_average_rating > 0 %},
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ package.get_average_rating }}",
    "reviewCount": "{{ package.reviews.count }}"
  }{% endif %}
}
</script>

{# TravelAction Schema #}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TravelAction",
  "name": "{{ package.title }}",
  "description": "{{ package.overview|escapejs }}",
  "target": {
    "@type": "TouristDestination",
    "name": "{{ package.destination.name }}",
    "description": "{{ package.destination.description|escapejs }}"
  },
  "provider": {
    "@type": "TravelAgency",
    "name": "Frozen Kashmir Tour & Travels",
    "telephone": "+91-95419-05293"
  }
}
</script>

{# BreadcrumbList Schema #}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://frozenkashmir.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Packages",
      "item": "https://frozenkashmir.com{% url 'package_list' %}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ package.title }}",
      "item": "https://frozenkashmir.com{% url 'package_detail' package.slug %}"
    }
  ]
}
</script>
{% endblock %}

{% block content %}
<div class="section package-detail-container" style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
  <div>
    {% if package.image %}
    <img src="{{ package.image.url }}" alt="{{ package.title }}"
      style="width: 100%; border-radius: 8px; margin-bottom: 2rem;">
    {% endif %}

    <h1>{{ package.title }}</h1>
    <div style="margin-bottom: 1rem; color: #666;">
      <span>{{ package.duration }}</span> | <span>{{ package.get_category_display }}</span> | <span>{{
        package.destination.name }}</span>
    </div>

    <div style="margin-bottom: 2rem;">
      <h3>Overview</h3>
      <p>{{ package.overview }}</p>
    </div>

    <div style="margin-bottom: 2rem;">
      <h3>Itinerary</h3>
      <div style="white-space: pre-line;">{{ package.itinerary }}</div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
      <div>
        <h3>Inclusions</h3>
        <div style="white-space: pre-line; color: green;">{{ package.inclusions }}</div>
      </div>
      <div>
        <h3>Exclusions</h3>
        <div style="white-space: pre-line; color: red;">{{ package.exclusions }}</div>
      </div>
    </div>
  </div>

  <div>
    <div
      style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 100px;">
      <div class="price" style="font-size: 2rem; margin-bottom: 1rem;">₹{{ package.price }}</div>

      <h3>Book This Tour</h3>
      <form method="post">
        {% csrf_token %}
        <div style="margin-bottom: 1rem;">
          <label>Name</label>
          <input type="text" name="name" required style="width: 100%; padding: 0.5rem;">
        </div>
        <div style="margin-bottom: 1rem;">
          <label>Email</label>
          <input type="email" name="email" required style="width: 100%; padding: 0.5rem;">
        </div>
        <div style="margin-bottom: 1rem;">
          <label>Phone</label>
          <input type="tel" name="phone" required style="width: 100%; padding: 0.5rem;">
        </div>
        <div style="margin-bottom: 1rem;">
          <label>Travel Date</label>
          <input type="date" name="date" required style="width: 100%; padding: 0.5rem;">
        </div>
        <div style="margin-bottom: 1rem;">
          <label>Travelers</label>
          <input type="number" name="travelers" min="1" value="1" required style="width: 100%; padding: 0.5rem;">
        </div>
        <button type="submit" class="btn" style="width: 100%;">Request Booking</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}